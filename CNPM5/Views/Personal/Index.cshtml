@model CNPM5.Models.TblStudents
@{
    ViewData["Title"] = "Index";
    <!--Layout = "~/Areas/Views/Personal/Index.cshtml";-->
}

<!-- Header Start -->
<div class="container-fluid bg-primary py-5 mb-5 page-header">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-10 text-center">
                <h1 class="display-3 text-white animated slideInDown">Trang cá nhân</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center">
                        <li class="breadcrumb-item"><a class="text-white" href="#">Trang chủ</a></li>
                        <li class="breadcrumb-item"><a class="text-white" href="#">Trang cá nhân</a></li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<!-- Header End -->
<div class="profile-container">
    <div class="profile-header">
        <div class="avatar-wrapper">
			<img src="@Model.AvatarUrl" alt="Ảnh đại diện" class="profile-avatar">
			<div class="status-badge active">Đang ở</div>
        </div>
		
        <h2 style="color:#ffff;" class="student-name">@Model.FullName</h2>
        <p class="student-code">@Model.StudentCode</p>
    </div>

    <button class="edit-toggle-btn" onclick="toggleEditMode()">
        Chỉnh sửa thông tin cá nhân
    </button>

    <div class="info-card personal-info">
        <h3><i class="fas fa-user-alt"></i> Thông Tin Cơ Bản</h3>

        <div class="display-mode">
            <div class="info-grid">
                <div><label>Họ và Tên:</label><p>@Model.FullName</p></div>
                <div><label>Mã Sinh Viên:</label><p>@Model.StudentCode</p></div>
                <div><label>Ngày sinh:</label><p>@Model.BirthDate</p></div>
                <div><label>Giới tính:</label><p>@Model.Gender</p></div>
            </div>
        </div>

        <div class="edit-mode hidden">
            <form id="personal-edit-form">
				<div class="info-grid">
                    <div class="info-grid">
                        <div>
                            <label for="fullName">Họ và Tên</label>
                            <input type="text" id="fullName" value="@Model.FullName" required>
                        </div>
                        <div>
                            <label for="studentCode">Mã Sinh Viên (Không sửa)</label>
                            <input type="text" id="studentCode" value="@Model.StudentCode" readonly>
                        </div>
                        <div>
                            <label for="birthDate">Ngày sinh</label>
                            <input type="date" id="birthDate" value="@Model.BirthDate?.ToString("yyyy-MM-dd")">
                        </div>
                        <div>
                            <label for="gender">Giới tính</label>
                            <select id="gender">
                                <option value="Nam" selected="@(Model.Gender == "Nam")">Nam</option>
                                <option value="Nữ" selected="@(Model.Gender == "Nữ")">Nữ</option>
                            </select>
                        </div>
                    </div>
                </div>

                <h4 class="section-title">Thông Tin Liên Hệ</h4>
                <div class="info-grid">
                    <div>
                        <label for="phone">Điện thoại</label>
                        <input type="tel" id="phone" value="@Model.Phone">
                    </div>
                    <div>
                        <label for="email">Email</label>
                        <input type="email" id="email" value="@Model.Email">
                    </div>
                    <div class="full-width">
                        <label for="pAddress">Địa chỉ Thường trú</label>
                        <input type="text" id="pAddress" value="@Model.PermanentAddress" required>
                    </div>
                    <div class="full-width">
                        <label for="tAddress">Địa chỉ Tạm trú</label>
                        <input type="text" id="tAddress" value="@Model.TemporaryAddress" required>
                    </div>
                </div>

                <h4 class="section-title">Thông Tin Học Tập</h4>
                <div class="info-grid">
                    <div>
                        <label for="faculty">Khoa</label>
                        <input type="text" id="faculty" value="@Model.Faculty">
                    </div>
                    <div>
                        <label for="major">Ngành</label>
                        <input type="text" id="major" value="@Model.Major">
                    </div>
                    <div>
                        <label for="citizenID">CCCD/CMND</label>
                        <input type="text" id="citizenID" value="@Model.CitizenId">
                    </div>
                    <div>
                        <label for="accountID">Tài khoản (ID)</label>
                        <input type="text" id="accountID" value="12345" readonly>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="save-btn">Lưu thay đổi</button>
                    <button type="button" class="cancel-btn" onclick="toggleEditMode()">Hủy</button>
                </div>
            </form>
        </div>
    </div>

    <div class="info-card ktx-info">
        <h3><i class="fas fa-bed"></i> Thông Tin Chỗ Ở</h3>
        <div class="info-grid">
            <div>
                <label>Tên Ký túc xá:</label>
                <p>Khu A</p>
            </div>
            <div>
                <label>Tòa/Dãy nhà:</label>
                <p>Nhà H3</p>
            </div>
            <div>
                <label>Số phòng:</label>
                <p class="room-number">305</p>
            </div>
            <div>
                <label>Loại phòng:</label>
                <p>4 người/Phòng (Có điều hòa)</p>
            </div>
            <div>
                <label>Ngày bắt đầu HĐ:</label>
                <p>15/09/2024</p>
            </div>
            <div>
                <label>Ngày kết thúc HĐ:</label>
                <p>15/09/2025</p>
            </div>
        </div>
    </div>
    <div class="roommate-info-container">
        <h4>🤝 Thông Tin Bạn Cùng Phòng</h4>

        <div class="privacy-note">
            <i class="fas fa-info-circle"></i>
            Thông tin liên hệ (SĐT, Email) chỉ hiển thị khi **được sự đồng ý** của sinh viên đó.
        </div>

        <div class="roommate-list-wrapper">

            <div class="roommate-card host-room">
                <div class="roommate-header">
                    <i class="fas fa-user-check"></i>
                    <h4 class="roommate-name">TRẦN THỊ B (CHỦ PHÒNG)</h4>
                </div>
                <div class="info-line">
                    <label>Mã Sinh Viên:</label>
                    <span>21H112002</span>
                </div>
                <div class="info-line">
                    <label>Số Điện Thoại:</label>
                    <span class="contact-data">0901 234 567</span>
                </div>
                <div class="info-line">
                    <label>Email:</label>
                    <span class="contact-data">thib.21h@sv.edu.vn</span>
                </div>
            </div>

            <div class="roommate-card">
                <div class="roommate-header">
                    <i class="fas fa-user"></i>
                    <h4 class="roommate-name">LÊ VĂN C</h4>
                </div>
                <div class="info-line">
                    <label>Mã Sinh Viên:</label>
                    <span>20H111005</span>
                </div>
                <div class="info-line">
                    <label>Số Điện Thoại:</label>
                    <span class="contact-hidden">Đã ẩn (Vì lý do riêng tư)</span>
                </div>
                <div class="info-line">
                    <label>Email:</label>
                    <span class="contact-hidden">Đã ẩn (Vì lý do riêng tư)</span>
                </div>
            </div>

            <div class="roommate-card">
                <div class="roommate-header">
                    <i class="fas fa-user"></i>
                    <h4 class="roommate-name">PHẠM THỊ D</h4>
                </div>
                <div class="info-line">
                    <label>Mã Sinh Viên:</label>
                    <span>22H113009</span>
                </div>
                <div class="info-line">
                    <label>Số Điện Thoại:</label>
                    <span class="contact-data">0912 345 678</span>
                </div>
                <div class="info-line">
                    <label>Email:</label>
                    <span class="contact-data">thid.22h@sv.edu.vn</span>
                </div>
            </div>

        </div>
    </div>
</div>
